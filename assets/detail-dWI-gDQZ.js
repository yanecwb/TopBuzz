import"./common-B9fqaSMr.js";import{a as e}from"./data-5eKa5uIL.js";function t(e){document.title="Error - DarkGrid Games",document.getElementById("gameDescription").textContent=e;const t=document.querySelector(".section:last-of-type");t&&(t.style.display="none")}document.addEventListener("DOMContentLoaded",function(){!function(){const n=localStorage.getItem("CURRENT_GAME");if(n||(location.href="/"),n)try{!function(t){document.title=`${t.title} - Gimo Games`;const n=document.querySelector(".detail-banner");n&&(n.style.backgroundImage=`url('${t.thumb}')`);const a=document.getElementById("gameDescription");a&&(a.textContent=t.description);const o=document.getElementById("detailTitle");o&&(o.textContent=t.title||"");const i=document.getElementById("detailMeta");i&&(i.innerHTML="");const s=document.querySelector(".top-detail-info");if(s){const e=document.createElement("div");e.className="game-name",e.title=t.title,e.textContent=t.title;const n=document.createElement("div");n.style.display="flex",n.style.alignItems="center",n.style.gap="40px",n.style.marginTop="12px";const a=document.createElement("div");a.innerHTML=`\n        <img src='/imgs/star.webp' alt='star' style='width:20px'/><span style='font-size:14px'>${Math.floor(2*Math.random())+4}</span>\n    `;const o=document.createElement("div");o.style.display=a.style.display="flex",o.style.alignItems=a.style.alignItems="center",o.style.gap=a.style.gap="6px",s.appendChild(e),s.appendChild(n),n.appendChild(a),n.appendChild(o)}e().then(e=>{const n=(t.category||"").toLowerCase(),a=e.find(e=>e.name.toLowerCase()===n);if(i){const e=Math.floor(2*Math.random())+4,n=document.createElement("div");n.className="detail-chip",n.innerHTML=`<img src="/imgs/star.webp" alt="star"/><span>${e}</span>`;const o=document.createElement("div");o.className="detail-chip",o.innerHTML=`<img src="${a?a.icon:"/imgs/category/best.png"}" alt="${t.category}"/><span>${t.category}</span>`,i.appendChild(n),i.appendChild(o)}const o=document.getElementById("gameCategory"),s=document.getElementById("gameCategoryIcon");s&&(s.src=`/imgs/category/${a?.name?.toLowerCase()||"best"}.png`),o&&(o.textContent=t.category)}),window.__GG__?.setupLazyLoading?.();const c=document.getElementById("similarGamesGrid"),l=document.getElementById("likeGamesGrid");if(!c||!l)return;[c,l].forEach(e=>{e.textContent="";const t=document.createElement("p");t.style.textAlign="center",t.style.color="#999",t.style.gridColumn="1 / -1",t.textContent="Loading...",e.appendChild(t)});const d=(t.category||(t.tags||"").split(",")[0]||"").trim();d?e().then(async e=>{const t=d.toLowerCase(),n=e.find(e=>t.includes(e.name.toLowerCase())||e.name.toLowerCase().includes(t)),a=`https://rss.gamemonetize.com/rssfeed.php?format=json&category=${n?.id||"All"}&type=mobile&popularity=bestgames&company=All&amount=4`,o=await fetch(a).then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}`);return e.json()}),i=`https://rss.gamemonetize.com/rssfeed.php?format=json&category=${e[Math.floor(10*Math.random())].id||"All"}&type=mobile&popularity=bestgames&company=All&amount=11`;return{similarGames:o,likeGames:await fetch(i).then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}`);return e.json()})}}).then(({similarGames:e,likeGames:t})=>{!function(e){const t=document.getElementById("similarGamesGrid");if(!t)return;if(t.textContent="",!Array.isArray(e)||0===e.length){const e=document.createElement("p");return e.style.textAlign="center",e.style.color="#999",e.style.gridColumn="1 / -1",e.textContent="No similar games",void t.appendChild(e)}const n=document.createDocumentFragment();e.forEach(e=>{const t=document.createElement("div");t.className="card",t.addEventListener("click",function(){try{window.__GG__?.click2Detail?.(e)}catch(t){}});const a=document.createElement("div");a.className="card-media",a.dataset.bg=e.thumb||"";const o=document.createElement("div");o.className="card-meta-text";const i=document.createElement("div");i.className="card-title",i.textContent=e.title||"";const s=document.createElement("div");s.className="card-desc",s.textContent=(e.description||e.instructions||"").trim(),o.appendChild(i),o.appendChild(s),t.appendChild(a),t.appendChild(o),n.appendChild(t)}),t.appendChild(n),window.__GG__?.setupLazyLoading?.()}(e),function(e){const t=document.getElementById("likeGamesGrid");if(!t||!Array.isArray(e))return;t.textContent="";const n=document.createDocumentFragment();e.forEach(e=>{const t=document.createElement("div");t.className="card",t.addEventListener("click",function(){try{window.__GG__?.click2Detail?.(e)}catch(t){}});const a=document.createElement("div");a.className="card-media",a.dataset.bg=e.thumb||"";const o=document.createElement("div");o.className="media-overlay";const i=document.createElement("div");i.className="media-title small",i.textContent=e.title||"",o.appendChild(i),a.appendChild(o),t.appendChild(a),n.appendChild(t)}),t.appendChild(n),window.__GG__?.setupLazyLoading?.()}(t),window.__GG__?.setupLazyLoading?.()}).catch(e=>{c.innerHTML='<p style="text-align:center;color:#999;grid-column:1 / -1;">Failed to load similar games</p>'}):c.innerHTML=l.innerHTML='<p style="text-align:center;color:#999;grid-column:1 / -1;">No category found</p>'}(JSON.parse(n))}catch(a){t("Invalid game data")}else t("No game data found")}();const n=document.getElementById("gameDescription"),a=document.getElementById("descToggle");n&&a&&a.addEventListener("click",function(){"true"===this.getAttribute("aria-expanded")?(n.style.display="-webkit-box",n.style.webkitLineClamp="2",n.style.webkitBoxOrient="vertical",n.style.overflow="hidden",this.setAttribute("aria-expanded","false"),this.textContent="Show more"):(n.style.display="block",n.style.webkitLineClamp="unset",n.style.overflow="visible",this.setAttribute("aria-expanded","true"),this.textContent="Show less")})});
