import"./common-B9fqaSMr.js";import{g as e,a as t}from"./data-5eKa5uIL.js";function n(e){return Array(e).fill(0).map(()=>'\n    <div class="card">\n      <div class="card-media skeleton" style="aspect-ratio: 1; border-radius: 12px;"></div>\n    </div>\n  ').join("")}function i(e,t){document.querySelectorAll(e).forEach(e=>{t.height&&(e.style.minHeight=t.height),t.width&&(e.style.minWidth=t.width)})}function o(){const e=document.querySelectorAll("img[data-src]"),t=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.classList.remove("lazy"),t.unobserve(n)}})});e.forEach(e=>t.observe(e))}document.addEventListener("DOMContentLoaded",function(){e().then(e=>{!function(e){const t=document.getElementById("topGames");if(!t)return;if(!e.hot||0===e.hot.length)return;const n=e.hot.slice(0,2).map(e=>`\n        <div class="game-card" data-bg="${e.thumb}"  onclick="window.__GG__?.click2Detail?.(${JSON.stringify(e).replace(/"/g,"&quot;")})">\n        </div>`).join("");t.innerHTML=n}(e),function(e){const t=document.getElementById("hotGrid");if(!t)return;if(t.classList.remove("loading"),!e.hot||0===e.hot.length)return void(t.innerHTML='<p style="text-align: center; color: #999; padding: 20px;">No hot games available</p>');!function(e,t){const n=document.createDocumentFragment();t.forEach(e=>{const t=document.createElement("div");t.className="card",t.addEventListener("click",function(){try{window.__GG__?.click2Detail?.(e)}catch(t){}});const i=document.createElement("div");i.className="card-media",i.dataset.bg=e.thumb||"";const o=document.createElement("div");o.className="card-meta-text";const a=document.createElement("div");a.className="card-title",a.textContent=e.title||"";const c=document.createElement("div");c.className="card-desc",c.textContent=(e.description||e.instructions||"").trim(),o.appendChild(a),o.appendChild(c),t.appendChild(i),t.appendChild(o),n.appendChild(t)}),e.innerHTML="",e.appendChild(n)}(t,e.hot.slice(0,6))}(e),function(e){const t=document.getElementById("newGrid");t&&(t.classList.remove("loading"),e.new&&0!==e.new.length?function(e,t){const n=document.createDocumentFragment();t.forEach(e=>{const t=document.createElement("div");t.className="card",t.addEventListener("click",function(){try{window.__GG__?.click2Detail?.(e)}catch(t){}});const i=document.createElement("div");i.className="card-media",i.dataset.bg=e.thumb||"";const o=document.createElement("div");o.className="media-overlay";const a=document.createElement("div");a.className="media-title small",a.textContent=e.title||"",o.appendChild(a),i.appendChild(o),t.appendChild(i),n.appendChild(t)}),e.innerHTML="",e.appendChild(n)}(t,e.new):t.innerHTML='<p style="text-align: center; color: #999; padding: 20px;">No new games available</p>')}(e)}),function(){const e=document.getElementById("topGames"),t=document.getElementById("hotGrid"),i=document.getElementById("newGrid"),o=document.getElementById("homeCategoryGrid");e&&(e.innerHTML=n(2)),t&&(t.innerHTML=n(6)),i&&(i.innerHTML=n(9)),o&&(o.innerHTML=Array(6).fill(0).map(()=>'\n    <div class="skeleton" style="height: 32px; width: 80px; border-radius: 20px; flex-shrink: 0;"></div>\n  ').join(""))}(),t().then(e=>{!function(e){const t=Array.isArray(e)?e:[],n=document.getElementById("homeCategoryGrid");if(!n)return;n.classList.remove("loading");const i=t.slice(0,6).map(e=>`\n        <a href="/category-game/?id=${e.id}&name=${encodeURIComponent(e.name)}" class="category-chip" aria-label="${e.name}">\n          <img src="${e.icon}" alt="${e.name}" loading="lazy">\n          ${e.name}\n        </a>`).join("");n.innerHTML=i}(e)}),setTimeout(function(){window.__GG__?.setupLazyLoading?.();const e=document.getElementById("backToTop");function t(){window.scrollY>300?e.style.display="flex":e.style.display="none"}e&&(window.addEventListener("scroll",t,{passive:!0}),t(),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}))},300)}),document.addEventListener("DOMContentLoaded",function(){"PerformanceObserver"in window&&function(){let e=0,t=[];function n(){e=t.reduce((e,t)=>e+t.value,0),window.gtag&&window.gtag("event","cls",{event_category:"Web Vitals",value:Math.round(1e3*e)/1e3,non_interaction:!0})}new PerformanceObserver(e=>{for(const i of e.getEntries())i.hadRecentInput||(t.push(i),n())}).observe({entryTypes:["layout-shift"]})}(),i(".hero-carousel",{height:"180px"}),i(".grid",{height:"200px"}),i(".home-categories",{height:"100px"}),o()}),window.PerformanceUtils={preventLayoutShift:function(e,t="auto",n="auto"){e&&(e.style.minHeight=t,e.style.minWidth=n,e.style.overflow="hidden")},reserveSpace:i,optimizeImages:o};
